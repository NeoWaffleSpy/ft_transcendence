<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * * * The content below * * * * * * * * * * * -->
<!-- * * * * * * * * * * is only a placeholder * * * * * * * * * * -->
<!-- * * * * * * * * * * and can be replaced. * * * * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<!-- * * * * * * * * * Delete the template below * * * * * * * * * * -->
<!-- * * * * * * * to get started with your project! * * * * * * * * -->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.bundle.min.js"></script>

<div style="height: 100vh; max-height: 100vh; display: flex; flex-direction: column; overflow: hidden;">

	<nav id="upperbar" class="navbar navbar-light bg-light navbar-fixed-top">
		<div class="d-flex justify-content-between w-100 ps-5 pe-3">
			<div class="sidebar-header">
				<a class="inox" href="#">Transcendence</a>
			</div>
			<div *ngIf="isConnected()" class="d-flex justify-content-between">
				<div *ngIf="myProfile" @currencyFadeIn aria-label="wealth" class="col text-muted align-items-center mx-5" >
					<img src="assets/DALLÂ·E 2023-05-11 21.52.35 - coin icon minted with a wheat stalk.png" alt="Currency" width="30" height="24">
					{{getBalance()}}
				</div> 
				 <div >
					<button class="btn btn-default" type="button" (click)="openDropdown()">
						{{getUsername()}}
						<img src="{{getAvatar()}}" class="rounded-circle" alt="Avatar" width = 30>
					</button>
					<ul class="dropdown-menu mondropdown">
						<li>
							<a class="dropdown-item" href="friends">Friends</a>
						</li>
						<li>
							<a class="dropdown-item"> blah </a>
						</li>
						<li>
							<a class="dropdown-item"> blah </a>
						</li>
						<li>
							<a class="dropdown-item" (click)="disconnect()" href="home">Disconnect</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- <div class="d-flex justify-content-between w-100 px-5">
			truc
		</div> -->
	</nav>
	<div class="wrapper h-100">
		<!-- Sidebar -->
		<nav id="sidebar" class="offscreen airforceblue h-100">
			<ul class="list-group active">
				<li class="active" aria-owns="#homeSubmenu">
					<a data-toggle="collapse" class="dropdown-toggle " (click)="togglePlay()">Home</a>
					<ul class="collapse list-unstyled show " id="play">
						<li>
							<a href="matchmaking">Ranked match</a>
						</li>
						<li>
							<a href="pong_debug">Casual match</a>
						</li>
						<li>
							<a href="#">Challenge a friend</a>
						</li>
					</ul>
				</li>
				<li>
					<a href="profile">My profile</a>
				</li>
				<li>
					<a href="chat">Chat</a>
				</li>
				<li>
					<a href="shop">Shop</a>
				</li>
				<li>
					<a *ngIf="!isConnected()" href="login">Log in</a>
				</li>
			</ul>
		</nav>

		<div class="w-100 gunmetal pb-2" style="max-height: calc(100vh - 54px); overflow: auto;">
			<router-outlet></router-outlet>
			<!-- <ngbd-toast-global></ngbd-toast-global> -->
			<!-- <Button class="btn btn-primary" (click)="showFriendReq()">Friend Req</Button>
			<Button class="btn btn-primary" (click)="showAchievements()">Achievements</Button>
			<Button class="btn btn-primary" (click)="showChallenge()">Challenge</Button> -->
		</div>

		<div *ngIf="isConnected()"><app-chat></app-chat></div>
		<app-toasts></app-toasts>
	</div>
</div>

<ng-template let-toast="toast" let-context="context" #toastFriendRequest>
    <div role="alert" aria-live="assertive" aria-atomic="true" style="position: relative; min-height: 200px;">
        <div class="toast-header">
        <strong class="mr-auto">Friend request</strong>
        <button type="button" class="btn ml-2 mb-1 close" (click)="notifDismiss(toast)" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        </div>
        <div class="toast-body">
        {{context.source_name}} wants to be your friend!
        </div>
    </div>
</ng-template>

<ng-template let-toast="toast" let-context="context" #toastChallenge>
    <div role="alert" aria-live="assertive" aria-atomic="true" style="position: relative; min-height: 200px;">
        <div class="toast-header">
        <strong class="mr-auto">Challenge</strong>
        <button type="button" class="btn ml-2 mb-1 close" (click)="notifDismiss(toast)" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        </div>
        <div class="toast-body">
        <!-- {{user_name}} challenges you -->
        {{context}} challenges you
        </div>
    </div>
</ng-template>

<ng-template let-toast="toast" let-context="context" #toastAchievement>
    <div role="alert" aria-live="assertive" aria-atomic="true" style="position: relative; min-height: 200px;">
        <div class="toast-header">
        <strong class="mr-auto">New acheivement</strong>
        <button type="button" class="btn ml-2 mb-1 close" (click)="notifDismiss(toast)" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
        </div>
        <div class="toast-body">
        <!-- You won the achievement {{achievement_name}}, congratulations -->
            You won the achievements {{context}}, congratulations
        </div>
    </div>
</ng-template>

<ng-template let-data="data" #popoverContent>
	<app-profile-popup [data]="data"></app-profile-popup>
</ng-template>